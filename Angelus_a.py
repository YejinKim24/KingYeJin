import pygame
import sys
import random
import tkinter.messagebox as msg  # 메세지 팝업 라이브러리 소환

titlebgs = [pygame.image.load("img/titlebg1.png"),
            pygame.image.load("img/titlebg2.png")]
titlebgssub = [pygame.image.load("img/titlebg3.png"),
            pygame.image.load("img/titlebg4.png")]

backg = pygame.image.load("img/sky.png")

screens = [pygame.image.load("img/screenblur.png"),
           pygame.image.load("img/fullblack.png")]

mazew = 20
mazeh = 10  # 미로 크기 설정

dwide = mazew * 2
dheight = mazeh * 2

dungeon = [] # 던전 리스트 크기 지정
dungeon2 = [] # 던전 리스트 크기 지정

pla = 0 #플레이어 이미지 변수
score = 0 #초기 점수
now = 0 #현재 위치 관련 변수
time = 0

key = ""

black = (0, 0, 0)
white = (255, 255, 255)

chax = 608
chay = 500  # 캐릭터 좌표
setu,setd,setl,setr = 0,0,0,0

walk = [0]

for i in range(2):
    walk.append(0)

for i in range(0,20): #맵 데이터 초기화
    dungeon.append([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])

chara = [
    pygame.image.load("img/chara/an_front.png"), #0
    pygame.image.load("img/chara/an_front1.png"), #1
    pygame.image.load("img/chara/an_front2.png"),#2
    pygame.image.load("img/chara/an_left.png"),#3
    pygame.image.load("img/chara/an_left1.png"),#4
    pygame.image.load("img/chara/an_left2.png"),#5
    pygame.image.load("img/chara/an_right.png"),#6
    pygame.image.load("img/chara/an_right1.png"),#7
    pygame.image.load("img/chara/an_right2.png"),#8
    pygame.image.load("img/chara/an_back.png"),#9
    pygame.image.load("img/chara/an_back1.png"),#10
    pygame.image.load("img/chara/an_back2.png")#11
         ]  # 이미지들 불러오기

hood = [pygame.image.load("img/chara/hood_front.png"),
        pygame.image.load("img/chara/hood_left.png"),
        pygame.image.load("img/chara/hood_right.png"),
        pygame.image.load("img/chara/hood_back.png")]

img = [ #맵칩이미지
    pygame.image.load("img/grass.png"),
    pygame.image.load("img/aspa2.png"),
    pygame.image.load("img/aspa1.png"),
    pygame.image.load("img/stone.png"),
    pygame.image.load("img/roadset1.png"),
    pygame.image.load("img/roadset2.png"),
    pygame.image.load("img/roadset3.png"),
    pygame.image.load("img/roadset4.png"),
    pygame.image.load("img/roadset5.png"),
    pygame.image.load("img/roadset6.png"),
    pygame.image.load("img/roadset7.png"),
    pygame.image.load("img/roadset8.png"),
    pygame.image.load("img/road2set1.png"),
    pygame.image.load("img/road2set2.png"),
    pygame.image.load("img/road2set3.png"),
    pygame.image.load("img/road2set4.png"),
    pygame.image.load("img/road2set5.png"),
    pygame.image.load("img/road2set6.png"),
    pygame.image.load("img/road2set7.png"),
    pygame.image.load("img/road2set8.png"),
    ]
img2 = [ #맵칩이미지
    pygame.image.load( "img/grassstoneset_in1.png"),
    pygame.image.load( "img/grassstoneset_in2.png"),
    pygame.image.load( "img/grassstoneset_in3.png"),
    pygame.image.load( "img/grassstoneset_in5.png"),
    pygame.image.load( "img/grassstoneset_in6.png"),
    pygame.image.load( "img/grassstoneset_in7.png"),
    pygame.image.load( "img/grassstoneset_in8.png"),
    pygame.image.load( "img/grassstoneset_out1.png"),
    pygame.image.load( "img/grassstoneset_out2.png"),
    pygame.image.load( "img/grassstoneset_out3.png"),
    pygame.image.load( "img/grassstoneset_in4.png"),
    pygame.image.load( "img/grassstoneset_out4.png"),
    pygame.image.load( "img/grassstoneset_out5.png"),
    pygame.image.load( "img/grassstoneset_out6.png"),
    pygame.image.load( "img/grassstoneset_out7.png"),
    pygame.image.load( "img/grassstoneset_out8.png"),
    pygame.image.load( "img/soil.png"),
    pygame.image.load( "img/sand.png"),
    pygame.image.load( "img/portal5.png"),
    pygame.image.load( "img/portal7.png")
    ]

img3 = [ #맵칩이미지
    pygame.image.load( "img/floor.png"),
    pygame.image.load( "img/door.png"),
    pygame.image.load( "img/door2.png"),
    pygame.image.load( "img/door3.png"),
    pygame.image.load( "img/bed.png"),
    pygame.image.load( "img/flowers.png"),
    pygame.image.load( "img/portal1.png"),
    pygame.image.load( "img/white.png"),
    pygame.image.load( "img/nothing.png"),
    pygame.image.load( "img/wall.png"), # 49번째 이미지
    pygame.image.load( "img/window.png"),
    pygame.image.load( "img/wall2.png"),
    pygame.image.load( "img/guard1.png"),
    pygame.image.load( "img/gaurd2.png"),
    pygame.image.load( "img/bookshelf1.png"),
    pygame.image.load( "img/bookshelf2.png"),
    pygame.image.load( "img/desk.png"),
    pygame.image.load("img/forbidbl.png"),
    pygame.image.load("img/water.png"),
    pygame.image.load( "img/treeall.png")
    ]

stage1 =[[47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,],
[47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,],
[47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,],
[47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,],
[47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,],
[47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,],
[47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,],
[47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,],
[47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,],
[47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,],
[47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,],
[47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,],
[47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,],
[47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,],
[47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,],
[47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,],
[47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,],
[47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,],
[47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,],
[47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47]
]

bedroom = [[57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,],
[57,57,0,45,0,0,45,45,45,45,0,45,45,0,0,0,45,45,0,0,0,0,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,],
[57,57,51,51,51,51,50,50,51,51,51,51,51,51,51,51,50,50,51,51,51,51,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,],
[57,57,51,47,47,47,47,47,47,40,40,40,40,40,40,47,47,47,47,40,40,50,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,],
[57,57,50,47,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,51,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,],
[57,57,50,47,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,48,40,41,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,],
[57,57,51,47,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,51,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,],
[57,57,51,47,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,50,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,],
[57,57,51,47,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,51,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,],
[57,57,50,47,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,51,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,],
[57,57,51,47,40,40,40,40,40,40,40,40,40,51,51,43,43,51,51,51,51,51,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,],
[57,57,51,47,40,40,40,40,40,40,40,40,54,51,40,40,40,40,40,40,40,51,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,],
[57,57,51,47,40,40,40,40,40,40,40,56,54,51,40,40,40,40,40,44,40,51,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,],
[57,57,50,47,40,40,40,40,40,40,40,56,54,51,40,40,40,40,40,40,40,51,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,],
[57,57,50,47,40,40,40,40,40,40,40,56,54,51,40,40,40,40,40,40,40,51,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,],
[57,57,51,47,40,40,40,40,40,40,55,55,54,51,56,56,40,40,40,40,40,51,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,],
[57,57,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,50,50,51,51,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,],
[57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,],
[57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,],
[57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57]
]

redapplestr1 =[[57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,],
[57,59,59,59,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,59,45,59,59,45,57,57,57,57,57,57,],
[57,45,59,0,0,0,0,0,0,45,0,0,0,0,45,0,0,0,45,0,0,0,0,0,0,45,0,0,0,0,59,59,59,59,57,57,57,57,57,57,],
[57,59,0,0,0,0,0,45,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,59,59,57,57,57,57,57,57,],
[57,59,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,45,45,0,0,0,0,0,0,0,0,0,59,57,57,57,57,57,57,],
[57,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,45,45,45,0,0,0,0,0,45,0,0,0,57,57,57,57,57,57,],
[57,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,57,57,57,57,57,57,],
[57,3,3,3,3,3,39,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,57,57,57,57,57,57,],
[57,53,53,53,52,3,3,3,52,53,53,53,53,53,53,53,53,53,53,53,53,53,53,53,53,53,53,53,53,53,3,3,3,53,57,57,57,57,57,57,],
[57,5,5,5,52,3,3,3,52,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,57,57,57,57,57,57,],
[57,2,1,2,52,3,3,3,52,1,2,2,1,2,2,1,2,2,1,2,2,1,2,2,1,2,2,1,2,2,1,2,2,1,57,57,57,57,57,57,],
[57,10,10,10,52,3,3,3,52,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,57,57,57,57,57,57,],
[57,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,30,3,3,3,57,57,57,57,57,57,],
[57,0,0,0,0,0,0,0,0,0,0,0,45,0,0,0,0,0,0,0,45,0,0,0,0,0,0,45,0,45,23,3,3,3,57,57,57,57,57,57,],
[57,0,0,0,45,0,0,0,0,0,0,0,0,45,45,45,0,0,0,0,0,0,0,45,45,0,0,0,45,0,32,3,3,3,57,57,57,57,57,57,],
[57,0,0,45,45,0,0,45,0,0,45,0,0,0,45,0,0,0,0,0,0,0,0,45,0,0,0,0,45,0,23,3,3,3,57,57,57,57,57,57,],
[57,0,45,0,0,0,0,0,0,45,0,0,45,0,0,0,0,45,0,45,45,0,0,0,45,0,0,45,45,59,23,3,3,3,57,57,57,57,57,57,],
[57,0,0,0,0,59,59,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,59,59,23,3,3,3,57,57,57,57,57,57,],
[57,45,45,0,0,59,59,59,0,0,0,0,59,0,0,0,0,0,59,0,0,0,0,59,0,0,0,59,59,59,23,3,3,3,57,57,57,57,57,57,],
[57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57]
]


redapplestr2 =[[57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,],
[57,3,3,3,24,59,59,59,59,59,59,59,59,59,59,59,59,59,59,59,45,59,59,59,59,59,59,59,59,59,59,59,59,59,57,57,57,57,57,57,],
[57,3,3,3,31,0,59,45,59,59,59,45,59,59,59,59,59,59,59,59,59,59,59,59,59,59,59,59,59,59,59,0,59,45,57,57,57,57,57,57,],
[57,3,3,3,24,0,0,45,0,0,59,59,0,59,0,0,0,0,0,45,0,0,0,0,0,0,0,0,0,0,59,59,45,59,57,57,57,57,57,57,],
[57,3,3,3,31,0,45,0,45,59,0,0,0,0,45,0,0,0,0,0,0,0,0,0,0,45,45,0,0,0,0,59,59,59,57,57,57,57,57,57,],
[57,3,3,3,31,59,59,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,45,0,0,0,0,0,0,0,0,0,45,59,57,57,57,57,57,57,],
[57,3,3,3,31,0,59,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,59,57,57,57,57,57,57,],
[57,3,3,3,33,21,21,34,34,21,34,34,21,34,21,21,21,21,21,34,34,34,34,34,34,34,34,34,34,34,34,34,21,21,57,57,57,57,57,57,],
[57,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,57,57,57,57,57,57,],
[57,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,57,57,57,57,57,57,],
[57,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,57,57,57,57,57,57,],
[57,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,57,57,57,57,57,57,],
[57,3,3,3,28,26,26,26,26,26,29,26,26,26,26,26,26,29,29,26,26,26,26,26,29,29,26,26,26,26,30,3,3,3,57,57,57,57,57,57,],
[57,3,3,3,24,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,45,0,32,3,3,3,57,57,57,57,57,57,],
[57,3,3,3,24,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,32,3,3,3,57,57,57,57,57,57,],
[57,3,3,3,31,0,0,45,0,0,0,0,0,0,0,0,0,0,0,45,0,0,0,0,0,0,0,0,0,0,23,3,3,3,57,57,57,57,57,57,],
[57,3,3,3,31,0,0,0,0,59,45,0,0,0,45,0,0,0,0,59,59,0,0,0,0,0,0,0,0,0,23,3,3,3,57,57,57,57,57,57,],
[57,3,3,3,24,59,0,59,59,59,59,59,59,0,0,59,59,59,59,59,59,59,59,45,45,0,0,0,0,59,23,3,3,3,57,57,57,57,57,57,],
[57,3,3,3,24,59,59,59,59,59,59,59,0,59,59,45,59,59,59,59,59,59,0,59,59,0,59,59,59,59,23,3,3,3,57,57,57,57,57,57,],
[57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57]
]

redapplestr3 = [[57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,],
[57,59,59,59,59,59,59,59,59,59,59,59,0,59,59,59,0,59,59,59,59,0,59,59,59,59,59,0,59,59,59,59,59,59,57,57,57,57,57,57,],
[57,45,0,59,59,59,59,59,59,59,59,59,59,59,45,59,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,59,59,57,57,57,57,57,57,],
[57,0,0,59,59,0,0,59,45,0,59,0,0,0,0,59,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,58,59,59,57,57,57,57,57,57,],
[57,0,0,59,0,59,0,0,0,0,0,0,0,0,0,0,0,45,58,58,58,58,58,58,58,58,58,58,58,58,58,45,45,59,57,57,57,57,57,57,],
[57,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,59,57,57,57,57,57,57,],
[57,21,34,34,34,21,21,34,21,34,34,21,21,34,34,34,21,34,34,34,34,34,34,34,21,21,34,34,34,34,34,34,21,34,57,57,57,57,57,57,],
[57,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,57,57,57,57,57,57,],
[57,53,53,53,53,53,53,53,53,53,53,53,53,53,53,53,53,53,53,53,53,53,53,53,53,53,53,53,53,53,53,53,53,53,57,57,57,57,57,57,],
[57,5,5,5,16,16,16,16,16,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,57,57,57,57,57,57,],
[57,2,2,1,2,2,1,2,2,1,2,2,1,2,2,1,2,2,1,2,2,1,2,2,1,2,2,1,2,2,1,2,2,1,57,57,57,57,57,57,],
[57,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,57,57,57,57,57,57,],
[57,53,53,53,53,53,53,53,53,53,53,53,53,53,53,53,53,53,53,53,53,53,53,53,53,53,53,53,53,53,53,53,53,53,57,57,57,57,57,57,],
[57,26,29,29,26,26,26,26,26,26,26,26,26,26,26,26,26,29,26,29,26,29,26,29,29,29,26,26,29,26,26,26,26,29,57,57,57,57,57,57,],
[57,0,0,0,0,0,0,0,0,0,45,0,0,45,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,57,57,57,57,57,57,],
[57,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,45,45,0,57,57,57,57,57,57,],
[57,0,0,0,45,45,45,0,0,0,0,0,0,0,0,0,59,0,59,0,45,0,0,0,0,0,0,0,45,0,0,0,0,0,57,57,57,57,57,57,],
[57,59,0,0,59,59,59,59,0,45,0,0,0,59,0,59,0,59,59,0,0,0,59,59,0,0,0,0,0,0,0,59,0,59,57,57,57,57,57,57,],
[57,59,0,59,59,59,0,59,59,0,59,59,59,59,59,59,59,59,59,59,59,0,59,0,59,0,59,0,59,59,59,59,59,59,57,57,57,57,57,57,],
[57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57]]

park = [[57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,],
[57,59,32,3,24,59,59,59,59,59,59,59,59,59,59,59,0,59,59,0,59,59,59,59,59,59,45,59,45,59,59,59,59,59,57,57,57,57,57,57,],
[57,59,32,3,24,59,59,59,45,59,0,45,0,0,59,59,59,0,59,59,59,45,0,59,59,59,59,59,59,0,59,59,59,59,57,57,57,57,57,57,],
[57,59,23,3,31,59,0,45,0,0,20,21,21,34,34,21,21,34,21,21,21,21,22,0,0,0,0,0,59,59,59,0,59,0,57,57,57,57,57,57,],
[57,59,32,3,31,0,45,45,0,0,32,3,3,3,3,3,3,3,3,3,3,3,31,0,0,0,0,0,0,59,45,59,59,59,57,57,57,57,57,57,],
[57,59,32,3,31,0,45,45,0,0,23,3,47,47,47,47,47,47,47,47,47,3,24,0,0,0,0,0,0,0,59,59,45,59,57,57,57,57,57,57,],
[57,59,32,3,24,0,0,0,0,0,23,3,47,28,29,29,29,29,29,30,47,3,24,0,0,45,0,0,0,59,59,59,59,59,57,57,57,57,57,57,],
[57,0,32,3,33,21,34,34,34,21,35,3,47,31,58,58,58,58,58,23,47,3,33,21,34,21,21,22,0,59,45,59,59,0,57,57,57,57,57,57,],
[57,0,23,3,3,3,3,3,3,3,3,3,47,31,58,45,45,45,58,23,47,3,3,3,3,3,3,31,0,0,59,59,59,0,57,57,57,57,57,57,],
[57,0,23,3,3,3,3,3,3,3,3,3,47,31,58,45,49,45,58,23,47,3,3,3,3,3,3,31,0,59,59,59,59,59,57,57,57,57,57,57,],
[57,0,23,3,3,3,3,3,3,3,3,3,47,31,58,45,45,45,58,23,47,3,3,3,3,3,3,24,0,59,59,59,59,59,57,57,57,57,57,57,],
[57,59,32,3,28,26,29,29,29,26,30,3,47,31,58,58,58,58,58,23,47,3,28,26,29,29,29,27,0,45,59,0,59,59,57,57,57,57,57,57,],
[57,45,32,3,24,0,45,0,0,0,23,3,47,33,21,21,21,21,21,35,47,3,24,0,0,0,0,0,0,59,59,59,59,45,57,57,57,57,57,57,],
[57,59,32,3,24,0,0,0,0,0,32,3,47,47,47,47,47,47,47,47,47,3,24,0,45,45,0,0,59,0,59,59,59,0,57,57,57,57,57,57,],
[57,59,23,3,31,0,0,0,45,0,23,3,3,3,3,3,3,3,3,3,3,3,31,0,45,0,0,0,0,59,0,59,59,59,57,57,57,57,57,57,],
[57,59,23,3,24,0,0,0,0,0,25,26,29,26,26,26,29,26,26,29,29,29,27,0,0,45,0,0,45,59,59,59,59,59,57,57,57,57,57,57,],
[57,59,23,3,31,59,45,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,59,59,45,0,0,0,59,59,59,0,59,57,57,57,57,57,57,],
[57,59,25,26,27,59,59,59,0,45,0,45,59,59,59,45,59,59,59,45,59,59,59,59,59,59,0,59,59,59,59,59,59,59,57,57,57,57,57,57,],
[57,59,59,59,59,0,59,59,59,59,59,59,59,59,59,59,59,59,59,59,59,59,59,59,59,59,59,59,59,59,59,59,59,45,57,57,57,57,57,57,],
[57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57]
]

tunnel = [[57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,],
[57,59,59,59,23,7,2,2,2,8,3,52,58,58,52,7,2,2,2,13,52,58,58,52,3,7,2,31,45,59,59,0,57,57,57,57,57,57,57,57,],
[57,59,59,59,23,7,2,2,2,8,3,52,58,58,52,7,2,2,2,13,52,58,58,52,3,7,2,31,59,59,59,59,57,57,57,57,57,57,57,57,],
[57,59,59,59,23,7,2,2,2,8,3,52,58,58,52,7,2,2,2,13,52,58,58,52,3,7,2,31,59,59,59,59,57,57,57,57,57,57,57,57,],
[57,59,0,59,32,7,2,2,2,8,3,52,58,58,52,7,2,2,2,13,52,58,58,52,3,7,2,33,22,59,0,59,57,57,57,57,57,57,57,57,],
[57,59,59,59,23,7,2,2,2,8,3,52,36,58,52,7,2,2,2,13,52,58,58,52,3,7,2,3,24,59,59,59,57,57,57,57,57,57,57,57,],
[57,59,59,59,32,7,2,2,2,8,3,52,58,36,52,7,2,2,2,13,52,58,58,52,3,7,2,3,24,59,45,59,57,57,57,57,57,57,57,57,],
[57,59,59,59,23,7,2,2,2,8,3,52,36,36,52,7,2,2,2,13,52,58,58,52,3,7,2,3,24,59,59,59,57,57,57,57,57,57,57,57,],
[57,59,59,59,23,9,12,2,2,8,3,52,36,36,52,7,2,2,2,13,52,58,58,52,3,7,2,28,27,59,59,59,57,57,57,57,57,57,57,57,],
[57,59,59,59,59,23,7,2,2,8,3,52,36,36,52,7,2,2,2,13,52,58,58,52,3,7,2,31,59,59,59,59,57,57,57,57,57,57,57,57,],
[57,59,59,0,0,23,7,2,2,8,3,52,58,36,52,7,2,2,2,13,52,58,58,52,3,7,2,31,0,59,59,59,57,57,57,57,57,57,57,57,],
[57,59,59,59,59,23,7,2,2,8,3,3,3,3,3,7,2,2,2,13,52,58,58,52,3,7,2,31,59,59,59,59,57,57,57,57,57,57,57,57,],
[57,59,59,59,0,32,7,2,2,8,3,3,3,3,3,7,2,2,2,13,52,58,58,52,3,7,2,31,0,59,59,59,57,57,57,57,57,57,57,57,],
[57,59,59,45,59,32,7,2,2,8,3,3,3,3,3,7,2,2,2,13,52,58,58,52,3,7,2,31,59,59,59,59,57,57,57,57,57,57,57,57,],
[57,59,59,0,0,23,7,2,2,8,3,52,36,36,52,7,2,2,2,13,52,36,58,52,3,7,2,31,0,0,59,59,57,57,57,57,57,57,57,57,],
[57,59,59,59,20,35,7,2,2,8,3,52,36,36,52,7,2,2,2,13,52,58,36,52,3,7,2,33,22,59,59,59,57,57,57,57,57,57,57,57,],
[57,59,59,59,23,4,17,2,2,8,3,52,0,58,52,7,2,2,2,13,52,36,36,52,3,7,2,28,27,59,59,59,57,57,57,57,57,57,57,57,],
[57,59,59,59,32,7,2,2,2,8,3,52,0,0,52,7,2,2,2,13,52,36,45,52,3,7,2,31,59,0,59,59,57,57,57,57,57,57,57,57,],
[57,59,59,59,23,7,2,2,2,8,3,52,45,0,52,7,2,2,2,13,52,45,0,52,3,7,2,31,59,59,59,59,57,57,57,57,57,57,57,57,],
[57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57]
]

forest =[[57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,],
[57,59,37,37,37,45,59,59,59,59,59,0,0,59,0,59,59,59,59,59,59,59,0,59,59,59,59,59,0,59,59,59,59,45,57,57,57,57,57,57,],
[57,59,37,37,37,37,0,59,59,59,59,59,59,0,45,0,59,59,45,59,59,59,59,59,59,45,59,59,59,59,59,0,59,0,57,57,57,57,57,57,],
[57,59,37,37,37,37,59,59,0,59,59,59,0,59,59,59,59,59,59,59,59,59,59,59,0,59,0,0,59,59,0,0,59,59,57,57,57,57,57,57,],
[57,59,37,37,37,37,59,59,59,59,59,59,59,59,59,59,59,59,59,59,59,0,45,45,59,59,59,0,0,45,0,45,59,59,57,57,57,57,57,57,],
[57,59,45,37,37,37,45,59,45,59,59,59,0,0,59,0,59,59,59,0,59,59,45,45,59,0,0,45,45,0,45,45,59,59,57,57,57,57,57,57,],
[57,59,59,45,37,37,37,37,37,37,37,37,45,37,37,45,59,0,59,0,59,0,0,59,59,59,45,45,0,59,45,45,45,59,57,57,57,57,57,57,],
[57,59,59,59,37,37,37,37,37,37,37,37,37,37,37,37,45,0,59,59,59,59,59,0,59,59,45,45,59,0,59,59,59,59,57,57,57,57,57,57,],
[57,59,59,59,59,37,37,37,37,37,37,37,37,37,37,37,37,59,59,59,59,59,59,59,59,59,59,59,59,59,59,59,59,59,57,57,57,57,57,57,],
[57,59,59,59,59,59,59,59,45,59,0,59,45,37,37,37,37,0,59,59,59,59,59,59,59,0,59,59,59,59,59,59,59,59,57,57,57,57,57,57,],
[57,59,59,45,59,59,59,59,59,0,59,0,0,37,37,37,37,59,0,59,59,59,59,0,0,59,0,59,59,59,59,59,59,0,57,57,57,57,57,57,],
[57,59,59,59,59,0,59,59,59,59,59,59,0,37,37,37,37,37,37,37,37,37,37,0,0,37,37,37,45,0,59,59,59,0,57,57,57,57,57,57,],
[57,59,59,59,59,59,0,59,59,0,59,59,45,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,59,59,59,59,59,57,57,57,57,57,57,],
[57,0,59,59,59,59,59,59,59,59,59,59,59,45,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,0,59,59,0,45,57,57,57,57,57,57,],
[57,59,59,59,59,59,59,59,59,59,59,59,59,59,59,0,59,0,59,0,0,59,0,45,45,37,37,37,37,59,59,59,59,0,57,57,57,57,57,57,],
[57,45,59,45,59,59,59,59,0,59,59,59,59,59,45,59,59,59,59,59,59,0,59,0,59,37,37,37,0,0,59,59,0,45,57,57,57,57,57,57,],
[57,58,58,45,45,59,45,59,59,59,59,59,59,59,59,59,59,59,59,59,59,59,59,59,45,37,37,37,37,59,59,59,59,59,57,57,57,57,57,57,],
[57,36,58,58,58,58,58,45,45,59,59,45,59,59,59,59,59,59,59,45,59,59,59,59,59,37,37,37,37,59,59,59,59,59,57,57,57,57,57,57,],
[57,36,36,36,36,36,58,58,58,58,58,58,45,59,59,59,59,0,59,0,59,0,59,59,59,37,37,37,37,59,59,59,59,59,57,57,57,57,57,57,],
[57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57,57]

]

portals = [pygame.image.load("img/portal1.png"),
           pygame.image.load("img/portal2.png")]

portals2 = [pygame.image.load("img/portal3.png"),
            pygame.image.load("img/portal4.png")]

portals3 = [pygame.image.load("img/portal5.png"),
            pygame.image.load("img/portal6.png")]

portals4 = [pygame.image.load("img/portal7.png"),
           pygame.image.load("img/portal8.png")]

backg = pygame.image.load("img/sky.png")

speakbar = [pygame.image.load("img/messagebar_an.png"),
            pygame.image.load("img/messagebar_hooded.png"),
            pygame.image.load("img/speakbar1.png"),
            pygame.image.load("img/speakbar2.png")
            ]

speakcomma = [pygame.image.load("img/finalspeak.png"),
              pygame.image.load("img/speakcomma2.png")]

fadeout = [pygame.image.load("img/white1.png"),
           pygame.image.load("img/black1.png")]

animation = [pygame.image.load("img/anima/1.png")]

daybar = [pygame.image.load("img/daybar_m.png"),
          pygame.image.load("img/daybar_tw.png"),
          pygame.image.load("img/daybar_n.png")]

tree = [pygame.image.load("img/treebody.png")]

pygame.mixer.init() #효과음
quitse =  pygame.mixer.Sound("ms/dingdong.mp3")
quitse.set_volume(0.5)

#색상 지정
black = (0,0,0)
white = (255,255,255)

time = 0
times = 0
titletime = 0 #타이틀 프레임 정의시 이용
titlever = 0 #타이틀화면이 영어로 나올지 한국어로 나올지 랜덤하게 보여주기

idx = 0 #게임 내 시간 분리용
key = 0


def quitgame():  # 종료의사를 묻는 메세지박스

    quitse.play()
    str = msg.askquestion("게임을 종료하시겠습니까?", "'예(Y)'를 눌러 게임을 종료합니다.")
    if str == 'yes':
        pygame.quit()
        sys.exit()

def spacenext(): #스페이스바를 누르면 인덱스가 다음으로 넘어가야할 때 씀
    global idx

    key = pygame.key.get_pressed()
    if key[pygame.K_SPACE] == 1:
        idx = idx + 1

def chnext(map, frontnum, backnum, x, y, bx,by ,pla1,pla2): #포탈 인식
    global idx, schy, schx, chay, chax,pla,alpha

    key = pygame.key.get_pressed()

    if (map[schy + 1][schx] == 48 or map[schy + 1][schx+1] == 48) :
        if key[pygame.K_SPACE] == 1:
            idx = frontnum
            chay = y
            chax = x
            pla =pla1
            alpha = 0

    if (map[schy + 1][schx] == 46 or map[schy + 1][schx+1] == 46) :
        if key[pygame.K_SPACE] == 1:
            idx = frontnum
            chay = y
            chax = x
            pla = pla1
            alpha = 0

    if (map[schy + 1][schx] == 38 or map[schy + 1][schx+1] == 38) :
        if key[pygame.K_SPACE] == 1:
            idx = backnum
            chay = by
            chax = bx
            pla = pla2
            alpha = 0


    if (map[schy + 1][schx] == 39 or map[schy + 1][schx+1] == 39) :
        if key[pygame.K_SPACE] == 1:
            idx = backnum
            chay = by
            chax = bx
            pla = pla2
            alpha = 0

def chnext2(map, frontnum, fx, fy, x, y ,pla1): #화면 좌측 하단부에 범위 지정해서 넘어가게 하기
    global idx, schy, schx, chay, chax,pla,alpha

    if (chay >= fy and chax <= fx) :

        chay = y
        chax = x
        pla =pla1
        idx = frontnum
        alpha=0

def chnext3(map, frontnum, fx, fy, x, y ,pla1): #화면 좌측 상단부에 범위 지정해서 넘어가게 하기
    global idx, schy, schx, chay, chax,pla,alpha

    if (chay <= fy and chax <= fx) :

        chay = y
        chax = x
        pla =pla1
        idx = frontnum
        alpha=0

def chnext4(map, frontnum, fx, fy, x, y ,pla1): #화면 우측 상단부에 범위 지정해서 넘어가게 하기
    global idx, schy, schx, chay, chax, pla, alpha

    if (chay <= fy and chax >= fx) :

        chay = y
        chax = x
        pla =pla1
        idx = frontnum
        alpha=0

def chnext5(map, frontnum, fx, fy, x, y ,pla1): #화면 우측 하단부에 범위 지정해서 넘어가게 하기
    global idx, schy, schx, chay, chax, pla, alpha

    if (chay >= fy and chax >= fx) :

        chay = y
        chax = x
        pla =pla1
        idx = frontnum
        alpha=0

def drawd2(map, bg):
    global x, y , X, Y, timesc

    for y in range(0, 20):
        for x in range(0, 40):
            X = (x) * 32
            Y = (y) * 32
            for i in range(60):
                if i < 20:
                    if map[y][x] == i:
                        bg.blit(img[i], [X, Y])
                elif i < 40:
                    if map[y][x] == i:
                        bg.blit(img2[i - 20], [X, Y])
                    if map[y][x] == 38:
                        if timesc % 4 == 0 or timesc % 4 == 1:
                            bg.blit(portals3[0], [X, Y])
                        if timesc % 4 == 2 or timesc % 4 == 3:
                            bg.blit(portals3[1], [X, Y])
                    if map[y][x] == 39:
                        if timesc % 4 == 0 or timesc % 4 == 1:
                            bg.blit(portals4[0], [X, Y])
                        if timesc % 4 == 2 or timesc % 4 == 3:
                            bg.blit(portals4[1], [X, Y])
                elif i < 60:
                    if map[y][x] == i:
                        if map[y][x] == 46 :
                            if timesc % 4 == 0 or timesc % 4 == 1:
                                bg.blit(portals[0], [X,Y])
                            if timesc % 4 == 2 or timesc % 4 == 3:
                                bg.blit(portals[1], [X,Y])
                        if map[y][x] == 48 :
                            if timesc % 4 == 0 or timesc % 4 == 1:
                                bg.blit(portals2[0], [X,Y])
                            if timesc % 4 == 2 or timesc % 4 == 3:
                                bg.blit(portals2[1], [X,Y])

                        if map[y][x] == 44:
                            bg.blit(img3[i - 40], [X-32, Y-32])

                        if map[y][x] != 44 and map[y][x] != 46:
                            bg.blit(img3[i - 40], [X, Y])

                        if map[y][x] == 59:
                            bg.blit(img3[i - 40], [X, Y])

    bg.blit(chara[pla], [chax-24 , chay-16])

def treeing(map,bg): #나무심기 2칸에 하나만 추천
    global x, y, X, Y

    for y in range(0, 20):
        for x in range(0, 40):
            X = (x) * 32
            Y = (y) * 32
            for i in range(60):
                if map[y][x] == 59:
                     #bg.blit(tree[0], [X-17, Y-40])
                     bg.blit(tree[0], [X-1, Y-1])

def programers():
    global idx, chay, chax, alpha, beta
    print(idx)
    print(chay, chax)
    print("alpha:", alpha)
    print("beta:", beta)

def movech2(map):  # 방향키 이동함

    global x, y, X, Y
    global chax, chay, pla, pld, now,a,b, timesc, schx, schy

    key = pygame.key.get_pressed()

    schx = int(chax/32)
    schy = int(chay/32)

    if key[pygame.K_UP] == 1:
        pla = 9
        if ((map[schy-1][schx] >= 0 and map[schy-1][schx] <= 48 and map[schy-1][schx] != 49
            ) and
            (map[schy-1][schx+1] >= 0 and map[schy-1][schx+1] <= 48 and map[schy-1][schx+1] != 49
            )):
            chay = chay - 16
        if timesc%4 == 0:
            pla = 10
        if timesc%4 == 1:
            pla = 9
        if timesc%4 == 2:
            pla = 11
        if timesc%4 == 3:
            pla = 9
        now = 1

    if key[pygame.K_DOWN] == 1:
        pla = 0

        if ((map[schy+1+1][schx] >= 0 and map[schy+1+1][schx] <= 48 and map[schy+1+1][schx] != 49
            ) and
            (map[schy+1+1][schx+1] >= 0 and map[schy+1+1][schx+1] <= 48 and map[schy+1+1][schx+1] != 49
            )):
            chay = chay + 16
        if timesc % 4 == 0:
            pla = 1
        if timesc % 4 == 1:
            pla = 0
        if timesc % 4 == 2:
            pla = 2
        if timesc % 4 == 3:
            pla = 0
        now = 1

    if key[pygame.K_LEFT] == 1:
        pla = 3

        if ((map[schy][schx-1] >= 0 and map[schy][schx-1] <= 48 and map[schy][schx-1] != 49
            ) and
            (map[schy+1][schx-1] >= 0 and map[schy+1][schx-1] <= 48 and map[schy+1][schx-1] != 49
            )):
            chax = chax - 16
        if timesc % 4 == 0:
           pla = 4
        if timesc % 4 == 1:
            pla = 3
        if timesc % 4 == 2:
            pla = 5
        if timesc % 4 == 3:
            pla = 3
        now = 1

    if key[pygame.K_RIGHT] == 1:
        pla = 6

        if ((map[schy][schx+1+1] >= 0 and map[schy][schx+1+1] <= 48 and map[schy][schx+1+1] != 49
            ) and
            (map[schy+1][schx+1+1] >= 0 and map[schy+1][schx+1+1] <= 48 and map[schy+1][schx+1+1] != 49
            )):
            chax = chax + 16
        if timesc % 4 == 0:
            pla = 7
        if timesc % 4 == 1:
            pla = 6
        if timesc % 4 == 2:
            pla = 8
        if timesc % 4 == 3:
            pla = 6
        now = 1

def drawte(bg,txt,x,y,fnt,col): #텍스트 출력 함수
    sur = fnt.render(txt, True, col)
    bg.blit(sur, [x,y])


def quit():  # 종료 및 메뉴 모듈

    key = pygame.key.get_pressed()

    if key[pygame.K_ESCAPE] == 1:
        quitgame()
    for event in pygame.event.get():
        if event.type == pygame.QUIT:
            quitgame()

def default_ingame(map, bg):

    global alpha

    quit()

    key = pygame.key.get_pressed()

    alpha = alpha + 1
    if alpha > 4:
        movech2(map)

    drawd2(map,bg)
    #treeing(map, bg)

    bg.blit(screens[0],[0,0])

    if alpha <= 4:
        bg.blit(screens[1],[0,0])

def draw_ingamet(bg, day, daytime, mapname, dayfont, mapfont):
    global alpha
    if alpha > 4:
        bg.blit(daybar[daytime], [0, 0])

        drawte(bg, "[{0}]".format(int(day)), 1205, 26, dayfont, black)
        drawte(bg, "{0}".format(mapname), 1145, 221, mapfont, black)

def main(): #메인모듈

    pygame.init() #시작 전 초기화 작업
    pygame.display.set_caption("99th Angelus")  # 윈도우 제목

    screen = pygame.display.set_mode((1280, 640)) #스크린 사이즈
    clock = pygame.time.Clock()

    defaultfont = pygame.font.Font("text/diary.ttf", 25)
    defaultfont1 = pygame.font.Font("text/diary.ttf", 15)

    global timesc, idx, chay, chax, pla, alpha, beta, key

    key = pygame.key.get_pressed()

    time = 0 #기본변수들 지정
    titlever = random.randint(0, 1)
    alpha = 0
    beta = 0
    idx = 5

    for event in pygame.event.get():
        if event.type == pygame.QUIT:
            quitgame()

    while True: #인덱스들
        event = pygame.event.poll()  # 이벤트 처리

        for event in pygame.event.get():

             print(pygame.mouse.get_pos())

        time = int(time + 1) #프레임 시간 1초 = 30프레임초
        times = int(time / 30) #실제 우리 기준 시간
        titletime = int(time/6) #타이틀 프레임 조정하려고 만든 시간
        x = time % 320 #구름 흘러가는 거 조정
        timesc = int(time / 2) #느린 시간

        for i in range(5):  # 배경 스크롤
            screen.blit(backg, [i * 320 - x, 0])  # 하늘 배경 스크롤

        if idx == 0: #타이틀 기본 화면

            if titlever == 0:
                screen.blit(titlebgs[titletime % 2], [0, 0])
            if titlever == 1:
                screen.blit(titlebgs[titletime % 2], [0, 0])
            quit()
            spacenext()
            alpha = 0
            beta = 0

        if idx == 1: #주인공이 쓰러지는 장면을 연출할 화면
            programers()

            screen.fill(black)

            if alpha > 30:
                screen.blit(animation[0], [0, 0])

            if alpha <= 50 and alpha > 0:
                beta = 0

            if alpha > 50:
                for i in range(beta):
                    screen.blit(fadeout[1],[0,0])

            if alpha > 10:
                screen.blit(speakbar[3], [0, 492])
                drawte(screen, "...", 50, 562, defaultfont, white)

            if beta >= 20:
                screen.fill(black)
            quit()
            beta = beta + 1
            alpha = alpha + 1
            pygame.time.delay(100)

            if beta > 24:
                spacenext()
                alpha = 0
                if titlever == 0:
                    screen.blit(titlebgssub[titletime % 2], [0, 0])
                if titlever == 1:
                    screen.blit(titlebgssub[titletime % 2], [0, 0])

            if beta > 40:
                screen.blit(speakcomma[1], [0, 492])


        if idx == 2: #하얀색 스테이지에 아무것도 없음
            drawd2(stage1, screen)

            alpha = alpha + 1

            programers()

            if alpha > 5:
                if timesc % 2 == 0:
                 pla = 4
                if timesc % 2 == 1:
                    pla = 7

            drawd2(stage1, screen)

            if alpha <= 2 :
                screen.blit(screens[0],[0,0])

            pygame.time.delay(500)
            quit()

            if alpha == 11:
                idx = 3
                alpha = 0
                pla = 9

            screen.blit(screens[0], [0, 0])

        if idx == 3:
            drawd2(stage1, screen)

            programers()

            alpha = alpha + 1

            if alpha >= 5:
                screen.blit(speakbar[0], [0, 492])
                drawte(screen, "Where am I?", 160, 562, defaultfont, black)
                if alpha >= 7 :
                    screen.blit(speakcomma[0], [0, 492])
                if alpha >= 7 :
                    spacenext()

            pygame.time.delay(500)

            quit()


        if idx == 4: #하얀색 스테이지에 아무것도 없음
            programers()

            quit()
            drawd2(stage1, screen)

            # 여기부터 플레이어 자동 움직임
            chay = chay - 16
            if timesc % 4 == 0:
                pla = 10
            if timesc % 4 == 1:
                pla = 9
            if timesc % 4 == 2:
                pla = 11
            if timesc % 4 == 3:
                pla = 9
            pygame.time.delay(100)

            if chay <= 32:
                idx = idx + 1
                chay = 600
                chax = 626
                alpha = 0
                beta = 0
            screen.blit(screens[0], [0, 0])

        if idx == 5: #수상한 사람들에게 말을 걸어보지만 대답은 없다
            programers()

            quit()
            drawd2(stage1, screen)
            screen.blit(hood[0], [440, 100])
            screen.blit(hood[0], [840-80, 100])
            alpha = alpha + 1
            key = pygame.key.get_pressed()

            if chay >= 200:
                chay = chay - 16
                if timesc % 4 == 0:
                    pla = 10
                if timesc % 4 == 1:
                    pla = 9
                if timesc % 4 == 2:
                    pla = 11
                if timesc % 4 == 3:
                    pla = 9

            if alpha > 30 and alpha < 40 and beta == 0:
                pla = 7
            if alpha >= 40 and alpha < 50 and beta == 0:
                pla = 4
            if alpha >= 50 :
                pla = 9
                if alpha == 50 and beta == 0:
                    beta = 0

            if beta == 0 and alpha > 55:
                screen.blit(speakbar[0], [0, 492])
                drawte(screen, "Umm... Who are you? and WHERE am I?", 160, 562, defaultfont, black)
                if key[pygame.K_SPACE] == 1 and alpha >= 65:
                    beta = 1
                    alpha = 0
                if alpha >= 65 and beta == 0 :
                    screen.blit(speakcomma[0],[0, 492])

            if beta == 1:
                screen.blit(speakbar[1], [0, 492])
                drawte(screen, "... (They kept refusing to answer any of the questions.)", 160, 562, defaultfont, black)
                if key[pygame.K_SPACE] == 1 and alpha > 5:
                    beta = 2
                    alpha =0
                if alpha >= 5 and beta == 1:
                    screen.blit(speakcomma[0],[0, 492])

            if beta == 2:
                screen.blit(speakbar[0], [0, 492])
                drawte(screen, "Hello...?", 160, 562, defaultfont, black)
                if key[pygame.K_SPACE] == 1 and alpha > 5:
                    beta = 3
                    alpha = 0
                if alpha >= 5 and beta == 2:
                    screen.blit(speakcomma[0],[0, 492])

            if alpha >= 7 and beta == 3:
                screen.fill(white)

            if beta == 3:
                screen.blit(speakbar[0], [0, 492])
                drawte(screen, "...?! (Suddenly dazzled by the light.)", 160, 562, defaultfont, black)
                if alpha >= 7 and beta == 3:
                    screen.blit(speakcomma[0],[0, 492])
                if key[pygame.K_SPACE] == 1 and alpha > 7:
                    idx = 6
            pygame.time.delay(100)

            screen.blit(screens[0],[0,0])

        if idx == 6:
            quit()
            alpha = 0
            beta = 0
            chax= 596
            chay= 360
            idx = idx + 1
            pla = 4


        if idx == 7: #침대에서 눈을 뜬 안젤라
            programers()

            quit()

            if beta >= 2:
                movech2(bedroom)
                chnext(bedroom, 9, 7, 196, 196, 596, 360,6,3)
                alpha = 0

            drawd2(bedroom, screen)

            screen.blit(daybar[0],[0,0])
            drawte(screen,"[0]",1205, 26, defaultfont, black)
            drawte(screen, "Home", 1165, 221, defaultfont, black)

            alpha = alpha + 1
            key = pygame.key.get_pressed()

            if beta == 0:
                if alpha == 30:
                    chax = chax - 16
                if alpha == 40:
                    chax = chax - 16
                if alpha >= 52:
                    screen.blit(speakbar[0], [0, 492])
                    drawte(screen, "... It's just a dream...", 160, 562, defaultfont, black)
                if alpha >= 64 :
                    screen.blit(speakcomma[0], [0, 492])
                if key[pygame.K_SPACE] == 1 and alpha > 64:
                    beta = 1
                    alpha = 0
            if beta == 0:
                if alpha <= 10:
                    screen.blit(screens[1],[0,0])

            if beta == 1:
                screen.blit(speakbar[0], [0, 492])
                drawte(screen, "I have to go school... Hurry up.", 160, 562, defaultfont, black)
                if alpha >= 30 :
                    screen.blit(speakcomma[0], [0, 492])
                if key[pygame.K_SPACE] == 1 and alpha > 30:
                    beta = 2
                    alpha = 0

        if idx == 8: #메세지창 안뜨는 안젤라의 침실
            programers()

            global schx, schy

            if alpha <= 4:
                schx = int(chax / 32)
                schy = int(chay / 32)

            beta = 0
            default_ingame(bedroom, screen)
            draw_ingamet(screen, 0, 0, "  Home", defaultfont, defaultfont)

            chnext(bedroom, 9, 7, 196, 196, 596, 136, 6, 3)



        if idx == 9: #레드 애플스트릿 1가
            programers()

            if alpha <= 4:
                schx = int(chax / 32)
                schy = int(chay / 32)

            default_ingame(redapplestr1,screen)
            draw_ingamet(screen, 0, 0, "Red Apple St.1", defaultfont, defaultfont1)

            chnext(redapplestr1, 10, 8, 196, 196, 596, 136, 6, 3)
            chnext5(redapplestr1, 10, 980, 530, 84, 84, 0)  # 화면 우측 하단부에 범위 지정해서 넘어가게 하기
            #chnext4(redapplestr1, 14, 980, 530, 84, 84, 0)  # 화면 우측 상단부에 범위 지정해서 넘어가게 하기
            chnext2(redapplestr1, 13, 140, 512, 100, 72, 0)  # 화면 좌측 하단부에 범위 지정해서 넘어가게 하기
            beta = 0

        if idx == 10: #레드 애플스트릿 2가
            programers()

            default_ingame(redapplestr2, screen)
            draw_ingamet(screen, 0, 0, "Red Apple St.2", defaultfont, defaultfont1)

            chnext2(redapplestr2, 11, 140, 510, 548, 76, 0)# 화면 좌측 하단부에 범위 지정해서 넘어가게 하기
            chnext3(redapplestr2, 9, 140, 55, 1028, 516, 9) # 화면 좌측 상단부에 범위 지정해서 넘어가게 하기
            chnext5(redapplestr2, 12, 1140, 500, 100, 516, 3)  # 화면 우측 하단부에 범위 지정해서 넘어가게 하기
            beta = 0

        if idx == 11: # 공원으로 가는 터널
            programers()

            default_ingame(tunnel, screen)
            draw_ingamet(screen, 0, 0, "Unknown ?? [H]", defaultfont, defaultfont1)

            chnext5(tunnel, 12, 400, 545, 100, 100, 0)  # 화면 우측 하단부에 범위 지정해서 넘어가게 하기
            chnext2(tunnel, 12, 350, 510, 84, 260, 6)  # 화면 좌측 하단부에 범위 지정해서 넘어가게 하기
            chnext4(tunnel, 10, 360, 62, 88, 480, 9)  # 화면 우측 상단부에 범위 지정해서 넘어가게 하기
            beta = 0

        if idx == 12:  # 공원
            programers()

            default_ingame(park, screen)
            draw_ingamet(screen, 0, 0, "Apple Park [H]", defaultfont, defaultfont1)

            chnext3(park, 11, 140, 60, 558, 500, 9)# 화면 좌측 상단부에 범위 지정해서 넘어가게 하기
            beta = 0

        if idx == 13:  # 숲
            programers()

            default_ingame(forest, screen)
            draw_ingamet(screen, 0, 0, " Lu Forest [H]", defaultfont, defaultfont1)
            chnext5(forest, 11, 100, 545, 200, 300, 6)  # 화면 우측 하단부에 범위 지정해서 넘어가게 하기
            chnext3(forest, 9, 1000, 62, 88, 480, 9)  # 화면 좌측 상단부에 범위 지정해서 넘어가게 하기

            beta = 0

        if idx == 14:  # 애플스트릿 3가
            programers()

            default_ingame(redapplestr3, screen)
            draw_ingamet(screen, 0, 0, "Red Apple St.3", defaultfont, defaultfont1)

            beta = 0

        pygame.display.update()
        clock.tick(30) #게임 fps 30프레임

if __name__ == '__main__' :
    main()

